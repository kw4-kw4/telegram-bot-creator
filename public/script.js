document.addEventListener('DOMContentLoaded', () => {     const botForm = document.getElementById('botForm');     const commandForm = document.getElementById('commandForm');     const botsList = document.getElementById('botsList');     const commandsList = document.getElementById('commandsList');     const loadCommandsBtn = document.getElementById('loadCommandsBtn');      // Загрузка списка ботов при загрузке страницы     loadBots();      // Обработчик отправки формы создания бота     botForm.addEventListener('submit', async (e) => {         e.preventDefault();          const botName = document.getElementById('botName').value;         const botToken = document.getElementById('botToken').value;          try {             const response = await fetch('/api/bots', {                 method: 'POST',                 headers: {                     'Content-Type': 'application/json',                 },                 body: JSON.stringify({ name: botName, token: botToken }),             });              const result = await response.json();              if (response.ok) {                 alert(result.message);                 botForm.reset();                 loadBots();             } else {                 alert('Ошибка: ' + result.error);             }         } catch (error) {             alert('Ошибка сети: ' + error.message);         }     });      // Обработчик отправки формы добавления команды     commandForm.addEventListener('submit', async (e) => {         e.preventDefault();          const botName = document.getElementById('commandBotName').value;         const command = document.getElementById('commandText').value;         const responseText = document.getElementById('commandResponse').value;          if (!botName || !command || !responseText) {             alert('Пожалуйста, заполните все поля');             return;         }          try {             const response = await fetch(`/api/bots/${botName}/commands`, {                 method: 'POST',                 headers: {                     'Content-Type': 'application/json',                 },                 body: JSON.stringify({ command, response: responseText }),             });              const result = await response.json();              if (response.ok) {                 alert(result.message);                 commandForm.reset();             } else {                 alert('Ошибка: ' + result.error);             }         } catch (error) {             alert('Ошибка сети: ' + error.message);         }     });      // Обработчик кнопки загрузки команд     loadCommandsBtn.addEventListener('click', loadBotCommands);      // Функция загрузки списка ботов     async function loadBots() {         try {             const response = await fetch('/api/bots');             const result = await response.json();              if (response.ok) {                 botsList.innerHTML = '';                 result.bots.forEach(bot => {                     const li = document.createElement('li');                     li.innerHTML = `                         <span>${bot.name} ${bot.is_active ? '(Активен)' : '(Не активен)'}</span>                         <button class="delete-btn" data-name="${bot.name}">Удалить</button>                     `;                     botsList.appendChild(li);                 });                  // Добавляем обработчики для кнопок удаления                 document.querySelectorAll('.delete-btn').forEach(btn => {                     btn.addEventListener('click', deleteBot);                 });             } else {                 botsList.innerHTML = '<li>Ошибка загрузки списка ботов</li>';             }         } catch (error) {             botsList.innerHTML = '<li>Ошибка сети: ' + error.message + '</li>';         }     }      // Функция удаления бота     async function deleteBot(e) {         const botName = e.target.getAttribute('data-name');          if (confirm(`Вы уверены, что хотите удалить бота ${botName}?`)) {             try {                 const response = await fetch(`/api/bots/${botName}`, {                     method: 'DELETE',                 });                  const result = await response.json();                  if (response.ok) {                     alert(result.message);                     loadBots();                 } else {                     alert('Ошибка: ' + result.error);                 }             } catch (error) {                 alert('Ошибка сети: ' + error.message);             }         }     }      // Функция загрузки команд бота     async function loadBotCommands() {         const botName = document.getElementById('commandsBotName').value;          if (!botName) {             alert('Пожалуйста, введите имя бота');             return;         }          try {             const response = await fetch(`/api/bots/${botName}/commands`);             const result = await response.json();              if (response.ok) {                 commandsList.innerHTML = '';                 if (result.commands.length === 0) {                     commandsList.innerHTML = '<li>У этого бота пока нет команд</li>';                     return;                 }                  result.commands.forEach(command => {                     const li = document.createElement('li');                     li.innerHTML = `                         <div>                             <strong>Команда:</strong> ${command.command}<br>                             <strong>Ответ:</strong> ${command.response}                         </div>                     `;                     commandsList.appendChild(li);                 });             } else {                 commandsList.innerHTML = '<li>Ошибка: ' + result.error + '</li>';             }         } catch (error) {             commandsList.innerHTML = '<li>Ошибка сети: ' + error.message + '</li>';         }     } });